

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Step 4: Create Dockerfile &mdash; HOLPRG-2002  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Step 5: Build and Run Our Application Container" href="step5.html" />
    <link rel="prev" title="Step 3: Setup DJANGO Project" href="step3.html" /> <link href="../../_static/style.css" rel="stylesheet" type="text/css"> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> HOLPRG-2002
          

          
            
            <img src="../../_static/CL-2021.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction/index.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../introduction/index.html#prerequisites">Prerequisites</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../labaccess/index.html">Lab Access</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../labaccess/index.html#ip-addressing-and-access-information">IP Addressing and Access Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../labaccess/index.html#connecting-to-the-lab">Connecting to the Lab</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../labaccess/index.html#option-1">Option 1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../labaccess/index.html#option-2-optional">Option 2 (optional)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Tasks</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Task #1: Setup Development Environment</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="step1.html">Step 1: Clone Repository</a></li>
<li class="toctree-l3"><a class="reference internal" href="step2.html">Step 2: Use IDE</a><ul>
<li class="toctree-l4"><a class="reference internal" href="step2.html#visual-studio-code">Visual Studio Code</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="step3.html">Step 3: Setup DJANGO Project</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Step 4: Create Dockerfile</a></li>
<li class="toctree-l3"><a class="reference internal" href="step5.html">Step 5: Build and Run Our Application Container</a></li>
<li class="toctree-l3"><a class="reference internal" href="step6.html">Step 6: Using Docker Compose</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../task2/index.html">Task #2: Obtaining Device Information</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../task2/step1.html">Step #1: Determining Data Structure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../task2/step1.html#sub-title">Sub-Title</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../task2/step2.html">Step #2: Create a Table</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../task2/step2.html#sub-title">Sub-Title</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../task2/step3.html">Step #3: Visualize Information from CSV</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../task2/step3.html#sub-title">Sub-Title</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../task3/index.html">Task #3: Build UI Logic</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../task3/step1.html">Step #1</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../task3/step1.html#sub-title">Sub-Title</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../task3/step2.html">Step #2</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../task3/step2.html#sub-title">Sub-Title</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../task3/step3.html">Step #3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../task3/step3.html#sub-title">Sub-Title</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../task4/index.html">Task #4: Add or Remove Interfaces</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../task4/step1.html">Step #1</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../task4/step1.html#sub-title">Sub-Title</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../task4/step2.html">Step #2</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../task4/step2.html#sub-title">Sub-Title</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../task4/step3.html">Step #3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../task4/step3.html#sub-title">Sub-Title</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../task5/index.html">Task #5: Apply Customizations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../task5/step1.html">Step #1: Apply Cisco UI Kit</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../task5/step1.html#sub-title">Sub-Title</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../task5/step2.html">Step #2</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../task5/step2.html#sub-title">Sub-Title</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../task5/step3.html">Step #3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../task5/step3.html#sub-title">Sub-Title</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../conclusions.html">Conclusions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendix.html">Appendix: Installing Pre-Requisites</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../appendix.html#install-docker">Install Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../appendix.html#install-git">Install Git</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../appendix.html#install-anx">Install anx</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../appendix.html#install-postman">Install Postman</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">HOLPRG-2002</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Tasks</a> &raquo;</li>
        
          <li><a href="index.html">Task #1: Setup Development Environment</a> &raquo;</li>
        
      <li>Step 4: Create Dockerfile</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://https://github.com//userlerueda/HOLPRG-2002/blob/master/docs/tasks/task1/step4.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="step-4-create-dockerfile">
<h1>Step 4: Create Dockerfile<a class="headerlink" href="#step-4-create-dockerfile" title="Permalink to this headline">¶</a></h1>
<p>We will now create a <cite>Dockerfile</cite>, this is required in order for us to run our DJANGO application as a container (this ensures that we get the same result independent of the underlying operating system).</p>
<p>Copy the following code to a file called <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> in the root of our repository.</p>
<div class="highlight-Dockerfile notranslate"><div class="highlight"><pre><span></span><span class="k">FROM</span> <span class="s">python:3-slim-buster</span>

<span class="c"># Create the /app directory an set it as the default workspace</span>
<span class="k">WORKDIR</span><span class="s"> /app</span>

<span class="c"># Copy the requirements.txt file inside the container</span>
<span class="k">COPY</span> requirements.txt .

<span class="c"># Install python requirements to ensure DJANGO is installed</span>
<span class="k">RUN</span> pip install -r requirements.txt --no-cache-dir

<span class="c"># Copy the contents of our DJANGO project into /app directory inside the container</span>
<span class="k">COPY</span> ./netprog .

<span class="c"># Upon container start, lets run DJANGO manage.py on port 80</span>
<span class="k">CMD</span> <span class="p">[</span><span class="s2">&quot;python&quot;</span><span class="p">,</span> <span class="s2">&quot;manage.py&quot;</span><span class="p">,</span> <span class="s2">&quot;runserver&quot;</span><span class="p">,</span> <span class="s2">&quot;0.0.0.0:80&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>After our Dockerfile is completed, we will need to create the <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> referenced in our Dockerfile.</p>
<p>Lets create a <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> in the root of our repository, with the following contents:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Django</span><span class="o">==</span><span class="mf">3.1</span><span class="o">.</span><span class="mi">7</span>
<span class="n">requests</span><span class="o">==</span><span class="mf">2.25</span><span class="o">.</span><span class="mi">1</span>
</pre></div>
</div>
<p>We have specified two requirements, one is DJANGO, the other one which is requests will be needed when we need to query CSR1000v’s APIs.
We will included it now to avoid having to rebuild our image later.
If anything changes in the requirements.txt file, we will have to rebuild our container.</p>
<p><em>Section author: Luis Rueda &lt;<a class="reference external" href="mailto:lurueda&#37;&#52;&#48;cisco&#46;com">lurueda<span>&#64;</span>cisco<span>&#46;</span>com</a>&gt;, Jairo Leon &lt;<a class="reference external" href="mailto:jaileon&#37;&#52;&#48;cisco&#46;com">jaileon<span>&#64;</span>cisco<span>&#46;</span>com</a>&gt;, Ovesnel Mas Lara &lt;<a class="reference external" href="mailto:omaslara&#37;&#52;&#48;cisco&#46;com">omaslara<span>&#64;</span>cisco<span>&#46;</span>com</a>&gt;</em></p>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="step5.html" class="btn btn-neutral float-right" title="Step 5: Build and Run Our Application Container" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="step3.html" class="btn btn-neutral float-left" title="Step 3: Setup DJANGO Project" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright Cisco Systems, Inc. 2020.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>